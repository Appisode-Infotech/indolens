<!DOCTYPE html>
<html dir="ltr" lang="en-US">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">


    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Indolens-{{order_detail.0.order_id}}</title>
    {% load static %}


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link href="{% static 'img/favicons/apple-touch-icon.png' %}" rel="apple-touch-icon" sizes="180x180">
    <link href="{% static 'img/favicons/favicon-32x32.png' %}" rel="icon" sizes="32x32" type="image/png">
    <link href="{% static 'img/favicons/favicon-16x16.png' %}" rel="icon" sizes="16x16" type="image/png">
    <link href="{% static 'img/favicons/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">
    <link href="{% static 'img/favicons/manifest.json' %}" rel="manifest">
    <meta content="{% static 'img/favicons/mstile-150x150.png' %}" name="msapplication-TileImage">
    <meta content="#ffffff" name="theme-color">
    <script src="{% static 'vendors/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'vendors/simplebar/simplebar.min.js' %}"></script>
    <script src="{% static 'js/config.js' %}"></script>

    <!-- Stylesheets -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap"
          rel="stylesheet">
    <link href="{% static 'vendors/simplebar/simplebar.min.css' %}" rel="stylesheet">
    <link href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" rel="stylesheet">
    <link href="{% static 'css/theme-rtl.min.css' %}" id="style-rtl" rel="stylesheet" type="text/css">
    <link href="{% static 'css/theme.min.css' %}" id="style-default" rel="stylesheet" type="text/css">
    <link href="{% static 'css/user-rtl.min.css' %}" id="user-style-rtl" rel="stylesheet" type="text/css">
    <link href="{% static 'css/user.min.css' %}" id="user-style-default" rel="stylesheet" type="text/css">

    <script>
      var isRTL = JSON.parse(localStorage.getItem('isRTL'));
      if (isRTL) {
        var linkDefault = document.getElementById('style-default');
        var userLinkDefault = document.getElementById('user-style-default');
        linkDefault.setAttribute('disabled', true);
        userLinkDefault.setAttribute('disabled', true);
        document.querySelector('html').setAttribute('dir', 'rtl');
      } else {
        var linkRTL = document.getElementById('style-rtl');
        var userLinkRTL = document.getElementById('user-style-rtl');
        linkRTL.setAttribute('disabled', true);
        userLinkRTL.setAttribute('disabled', true);
      }

    </script>
    <style>
    @media print {
        body, html {
            width: 100%;
            margin: 0;
            padding: 0;
        }

        .btn {
            display: none;
        }
        table {
            width: 100%;
        }

        th, td {
            padding: 8px; /* Adjust padding as needed */
        }
        /* Show all table columns when printing */
        @page {
            size: auto;
            margin: 0;
        }

        table {
            page-break-inside: auto;
        }

        tr {
            page-break-inside: avoid;
            page-break-after: auto;
        }

    </style>
</head>


<body>

<!-- ===============================================-->
<!--    Main Content-->
<!-- ===============================================-->
<main class="main" id="top">
    <div class="container-fluid px-0">

        <div class="content">

            <section class="pt-5 pb-9 bg-white border-top border-300">

                <div class="container-small">
                    <div class="d-flex justify-content-between align-items-end mb-4">
                        {% if invoice_details|length == 0 %}
                        <h2 class="mb-0">Draft Invoice</h2>
                        {% else %}
                        <h2 class="mb-0">Invoice</h2>
                        {% endif %}
                        <div>
                            <button class="btn btn-phoenix-secondary" onclick="window.print()"><span
                                    class="fa-solid fa-print me-sm-2"></span><span class="d-none d-sm-inline-block">Print</span>
                            </button>
                        </div>
                    </div>
                    <div class="bg-soft p-4 mb-4 rounded-2">
                        <div class="row g-4">
                            <div class="col-12 col-sm-12 col-lg-3 ">
                                <div class="row g-4 g-lg-2">
                                    {% if invoice_details|length != 0 %}
                                    <div class="col-12 col-sm-6 col-lg-12">
                                        <div class="row align-items-center g-0">
                                            <div class="col-auto col-lg-6 col-xl-5">
                                                <h6 class="mb-0 me-3">Invoice No :</h6>
                                            </div>
                                            <div class="col-auto col-lg-6 col-xl-7">
                                                <p class="fs--1 text-800 fw-semi-bold mb-0">
                                                    {{invoice_details.invoice_number}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-lg-12">
                                        <div class="row align-items-center g-0">
                                            <div class="col-auto col-lg-6 col-xl-5">
                                                <h6 class="me-3">Invoice Date :</h6>
                                            </div>
                                            <div class="col-auto col-lg-6 col-xl-7">
                                                <p class="fs--1 text-800 fw-semi-bold mb-0" >
                                                    {{invoice_details.invoice_date}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                    <div class="col-12 col-sm-6 col-lg-12">
                                        <div class="row align-items-center g-0">
                                            <div class="col-auto col-lg-6 col-xl-5">
                                                <h6 class="me-3">Order No :</h6>
                                            </div>
                                            <div class="col-auto col-lg-6 col-xl-7">
                                                <p class="fs--1 text-800 fw-semi-bold mb-0">
                                                    {{order_detail.0.order_id}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-lg-12">
                                        <div class="row align-items-center g-0">
                                            <div class="col-auto col-lg-6 col-xl-5">
                                                <h6 class="me-3">GST Reg No :</h6>
                                            </div>
                                            <div class="col-auto col-lg-6 col-xl-7">
                                                <p class="fs--1 text-800 fw-semi-bold mb-0">
                                                    {{store_data.0.store_gst}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-lg-12">
                                        <div class="row align-items-center g-0">
                                            <div class="col-auto col-lg-6 col-xl-5">
                                                <h6 class="me-3">Order Date :</h6>
                                            </div>
                                            <div class="col-auto col-lg-6 col-xl-7">
                                                <p class="fs--1 text-800 fw-semi-bold mb-0">
                                                    {{order_detail.0.created_on}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 col-lg-4">
                                <div class="d-flex justify-content-center">
                                    <div class="col-12 col-lg-4">
                                        <h6 class="mb-2 me-3">Sold by :</h6>
                                        <p class="fs--1 text-800 fw-semi-bold mb-0">{{order_detail.0.creator_name}}<br/>
                                            {{store_data.0.store_address}} </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 col-lg-5">
                                <div class="row g-4">
                                    <div class="col-12 col-lg-6">
                                        <h6 class="mb-2"> Billing Address :</h6>
                                        <div class="fs--1 text-800 fw-semi-bold mb-0">
                                            <p class="mb-2">{{order_detail.0.customer_name}}</p>
                                            <div style="max-width: 200px;">
                                                <p class="mb-2">{{order_detail.0.address}}</p>
                                            </div>
                                            <p class="mb-2">{{order_detail.0.email}}</p>
                                            <p class="mb-0">{{order_detail.0.phone}}</p>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-lg-6">
                                        <h6 class="mb-2"> Shipping Address :</h6>
                                        <div class="fs--1 text-800 fw-semi-bold mb-0">
                                            <p class="mb-2">{{order_detail.0.customer_name}}</p>
                                            <div style="max-width: 200px;">
                                                <p class="mb-2">{{order_detail.0.address}}</p>
                                            </div>
                                            <p class="mb-2">{{order_detail.0.email}}</p>
                                            <p class="mb-0">{{order_detail.0.phone}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="px-0">
                        <div class="table-responsive scrollbar">
                            <table class="table fs--1 text-900 mb-0">
                                <thead class="bg-200">
                                <tr>
                                    <th scope="col" colspan="1"></th>
                                    <th scope="col" colspan="2">Products</th>
                                    <th class="ps-5" colspan="2">HSN Number</th>
                                    <th scope="col" colspan="1">Quantity</th>
                                    <th class="text-end" colspan="2">Unit Price</th>
                                    <th class="text-end" colspan="1">Discount</th>
                                    <th class="text-end" colspan="2">Total Price</th>
                                    <th scope="col" style="width: 24px;"></th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for order in order_detail %}
                                <tr>
                                    <td class="align-middle" colspan="1">{{ loop.index }}</td>
                                    <td class="align-middle" colspan="2">
                                        <p class="line-clamp-1 mb-0 fw-semi-bold" >{{order.product_name}}</p>
                                    </td>
                                    <td class="align-middle ps-5" colspan="2">
                                        {% if order.hsn_product == None %}
                                        N/A
                                        {% else %}
                                        {{order.hsn_product}}
                                        {% endif %}
                                    </td>
                                    <td class="align-middle text-700 fw-semi-bold" colspan="1">{{order.purchase_quantity}}</td>
                                    <td class="align-middle text-end text-1000 fw-semi-bold" colspan="2">
                                        ₹{{order.unit_sale_price}}
                                    </td>
                                    <td class="align-middle text-end fw-semi-bold" colspan="1">{{order.discount_percentage}}%</td>
                                    <td class="align-middle text-end" colspan="2">₹{{order.product_total_cost}}</td>
                                    <td class="border-0"></td>
                                </tr>
                                {% endfor %}

                                <tr class="bg-200">
                                    <td></td>
                                    <td class="align-middle fw-semi-bold" colspan="9">Subtotal</td>
                                    <td class="align-middle text-end fw-bold">₹ {{order_detail.0.total_cost }}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td class="border-0"></td>
                                    <td colspan="6"></td>
                                    <td class="align-middle fw-bold ps-15" colspan="2">Shipping Cost</td>
                                    <td class="align-middle text-end fw-semi-bold" colspan="2">0</td>
                                    <td class="border-0"></td>
                                </tr>
                                <tr>
                                    <td class="border-0"></td>
                                    <td colspan="6"></td>
                                    <td class="align-middle fw-bold ps-15" colspan="2">Discount</td>
                                    <td class="align-middle text-end fw-semi-bold" colspan="2"
                                        id="discount_amount"></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td class="border-0"></td>
                                    <td colspan="6"></td>
                                    <td class="align-middle fw-bold ps-15" colspan="2">Amount Paid</td>
                                    <td class="align-middle text-end fw-semi-bold" colspan="2"
                                        id="amount_paid">{{order_detail.0.amount_paid}}</td>
                                    <td></td>
                                </tr>
                                <tr class="bg-200">
                                    <td class="align-middle ps-4 fw-bold text-1000" colspan="3">Balance Amount</td>
                                    <td id="totalWords" class="align-middle fw-bold text-1000" colspan="7"></td>
                                    <td class="align-middle text-end fw-bold" id="balance">
                                    </td>
                                    <td></td>
                                </tr>

                                </tbody>
                            </table>
                        </div>
                        <div class="text-end py-9 border-bottom border-300"><img class="mb-3"
                                                                                 src="../../../assets/img/logos/phoenix-mart.png"
                                                                                 alt=""/>
                            <h4>Authorized Signatory</h4>
                        </div>
                        <div class="py-4 border-bottom border-300">
                            <p>
                                Terms & Conditions : <br/>
                                1. The Order placed cannot be cancelled or exchanged.<br/>
                                2. Fitting of old Frames / Lens is at customer's risk.<br/>
                                3. Order must be collected within 30 days of order booking.<br/>
                                4. Warranty on products are as per the Manufacturer's terms.<br/>
                                5. Minimum of 50% of total order amount should be given towards advance.<br/>
                                6. Composition Taxable Person, Not Eligible To Collect Tax On Supplies.<br/>
                                7. All legal disputes are subjected to Nelamangala jurisdiction.<br/>
                            </p>
                        </div>

                    </div>

                    <div class="d-flex justify-content-center mt-3">
                        <div class="d-flex justify-content-center mb-3">
                            <button class="btn btn-phoenix-secondary"><span
                                    class="fa-solid fa-print me-sm-2"></span><span class="d-none d-sm-inline-block">Print</span>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- end of .container-->

            </section>

        </div>
    </div>

</main>
<!-- ===============================================-->
<!--    End of Main Content-->
<!-- ===============================================-->

<!-- ===============================================-->
<!--    JavaScripts-->
<!-- ===============================================-->
<script src="{% static 'vendors/popper/popper.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap/bootstrap.min.js' %}"></script>
<script src="{% static 'vendors/anchorjs/anchor.min.js' %}"></script>
<script src="{% static 'vendors/is/is.min.js' %}"></script>
<script src="{% static 'vendors/fontawesome/all.min.js' %}"></script>
<script src="{% static 'vendors/lodash/lodash.min.js' %}"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
<script src="{% static 'vendors/list.js/list.min.js' %}"></script>
<script src="{% static 'vendors/feather-icons/feather.min.js' %}"></script>
<script src="{% static 'vendors/dayjs/dayjs.min.js' %}"></script>
<script src="{% static 'js/phoenix.js' %}"></script>

</body>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var totalCost = {{ order_detail.0.total_cost }};
        var discountCost = {{ order_detail.0.discount_cost }};
        var amountPaid = {{order_detail.0.amount_paid}};

        var discountedAmount = totalCost - discountCost;
        var balanceAmount = discountCost - amountPaid;

        document.getElementById('discount_amount').textContent = '₹ ' + discountedAmount;
        document.getElementById('balance').textContent = '₹ ' + balanceAmount;
    });


</script>
<script>
    const singleDigits = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
    const twoDigits = [
        'Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'
    ];
    const tens = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
    const scales = ['', 'Thousand', 'Million', 'Billion', 'Trillion'];

    function convertLessThanThousand(number) {
        let words = '';

        const hundreds = Math.floor(number / 100);
        const tensUnits = number % 100;

        if (hundreds !== 0) {
            words += singleDigits[hundreds] + ' Hundred';
            if (tensUnits !== 0) {
                words += ' ';
            }
        }

        if (tensUnits < 20 && tensUnits >= 10) {
            words += twoDigits[tensUnits - 10];
        } else if (tensUnits >= 20) {
            words += tens[Math.floor(tensUnits / 10)];
            if (tensUnits % 10 !== 0) {
                words += ' ' + singleDigits[tensUnits % 10];
            }
        } else if (tensUnits !== 0) {
            words += singleDigits[tensUnits];
        }

        return words.trim();
    }

    function numberToWords(number) {
        if (number === 0) return 'Zero';

        let words = '';
        let scaleIndex = 0;

        while (number > 0) {
            if (number % 1000 !== 0) {
                const inWords = convertLessThanThousand(number % 1000);
                words = inWords + ' ' + scales[scaleIndex] + ' ' + words;
            }
            scaleIndex++;
            number = Math.floor(number / 1000);
        }

        return words.trim();
    }

    const discountCostElement = document.getElementById('discountCost');
    const discountCostText = discountCostElement.innerText;
    const grandTotalInNumber = parseFloat(discountCostText.replace('₹', ''));

    const totalWords = numberToWords(grandTotalInNumber);
    console.log(totalWords):
    document.getElementById('totalWords').innerText = totalWords + ' Rupees';

</script>


</html>