<!DOCTYPE html>
<html dir="ltr" lang="en-US">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Indolens admin - Create Sub Admin</title>

    {% load static %}
    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <!-- Favicon and Manifest -->
    <link href="{% static 'img/favicons/apple-touch-icon.png' %}" rel="apple-touch-icon" sizes="180x180">
    <link href="{% static 'img/favicons/favicon-32x32.png' %}" rel="icon" sizes="32x32" type="image/png">
    <link href="{% static 'img/favicons/favicon-16x16.png' %}" rel="icon" sizes="16x16" type="image/png">
    <link href="{% static 'img/favicons/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">
    <link href="{% static 'img/favicons/manifest.json' %}" rel="manifest">
    <meta content="{% static 'img/favicons/mstile-150x150.png' %}" name="msapplication-TileImage">
    <meta content="#ffffff" name="theme-color">

    <!-- JavaScript Dependencies -->
    <script src="{% static 'vendors/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'vendors/simplebar/simplebar.min.js' %}"></script>
    <script src="{% static 'js/config.js' %}"></script>

    <!-- Stylesheets -->
    <link href="{% static 'vendors/choices/choices.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendors/flatpickr/flatpickr.min.css' %}" rel="stylesheet">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap"
          rel="stylesheet">
    <link href="{% static 'vendors/simplebar/simplebar.min.css' %}" rel="stylesheet">
    <link href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" rel="stylesheet">
    <link href="{% static 'css/theme-rtl.min.css' %}" id="style-rtl" rel="stylesheet" type="text/css">
    <link href="{% static 'css/theme.min.css' %}" id="style-default" rel="stylesheet" type="text/css">
    <link href="{% static 'css/user-rtl.min.css' %}" id="user-style-rtl" rel="stylesheet" type="text/css">
    <link href="{% static 'css/user.min.css' %}" id="user-style-default" rel="stylesheet" type="text/css">

    <script>
      var isRTL = JSON.parse(localStorage.getItem('isRTL'));
      if (isRTL) {
        var linkDefault = document.getElementById('style-default');
        var userLinkDefault = document.getElementById('user-style-default');
        linkDefault.setAttribute('disabled', true);
        userLinkDefault.setAttribute('disabled', true);
        document.querySelector('html').setAttribute('dir', 'rtl');
      } else {
        var linkRTL = document.getElementById('style-rtl');
        var userLinkRTL = document.getElementById('user-style-rtl');
        linkRTL.setAttribute('disabled', true);
        userLinkRTL.setAttribute('disabled', true);
      }

    </script>
</head>


<body>

<!-- ===============================================-->
<!--    Main Content-->
<!-- ===============================================-->
<main class="main" id="top">
    <div class="container-fluid px-0">
        {% include 'nav_bar.html' %}
        <div class="content">

            <h2 class="mb-4">Create a sub admin</h2>
            <div class="row mb-4">
                <div class="col-xl-9">
                    <form action="{% url 'create_sub_admin' %}"
                          class="row g-3 needs-validation needs-password-validation" enctype="multipart/form-data"
                          method="post" novalidate="">
                        {% csrf_token %}

                        <div class="dz-preview-cover d-flex align-items-center justify-content-center mb-2 mb-md-0">
                            <div class="avatar avatar-4xl"><img alt="..."
                                                                class="rounded-circle avatar-placeholder"
                                                                data-dz-thumbnail="data-dz-thumbnail" id="previewImage"
                                                                src="/static/img/team/avatar.png"/></div>
                        </div>

                        <div class="col-md-12">
                            <label class="form-label" for="profilePic">Upload profile pic</label>
                            <input accept="image/*" class="form-control" id="profilePic" name="profilePic" required
                                   type="file"/>
                        </div>


                        <div class="col-md-6">
                            <label class="form-label" for="fullName">Name</label>
                            <input class="form-control" id="fullName" name="fullName" required type="text" value=""/>
                            <div class="invalid-feedback">Please provide a valid Name.</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="email">Email</label>
                            <input class="form-control" id="email" name="email" required
                                   type="email" value="">
                            <div class="invalid-feedback">Please provide a valid email.</div>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label" for="phone">Phone</label>
                            <input class="form-control" id="phone" name="phone" required type="number"
                                   value=""/>
                            <div class="invalid-feedback">Please provide a valid phone number.</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="password">Password</label>
                            <input class="form-control" id="password" name="password" required type="password"
                                   value=""/>
                            <div class="invalid-feedback">Please provide a valid Password.</div>
                        </div>

                        <div class="col-md-12">
                            <label class="form-label" for="confirmPassword">Confirm Password</label>
                            <input class="form-control" id="confirmPassword" name="confirmPassword" required
                                   type="password" value=""/>
                            <div class="invalid-feedback">Passwords do not match.</div>
                        </div>

                        <div class="col-12">
                            <label class="form-label" for="completeAddress">Complete Address</label>
                            <textarea class="form-control" id="completeAddress" name="completeAddress" required
                                      rows="3"></textarea>
                            <div class="invalid-feedback">Please provide a valid address.</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="document1Type">Document 1 Type</label>
                            <select aria-label="Default select example" class="form-select" id="document1Type"
                                    name="document1Type"
                                    required>
                                <option selected="" value="">Open this select menu</option>
                                <option value="Aadhar">Aadhar</option>
                                <option value="Driving Licence">Driving Licence</option>
                                <option value="Ration Card">Ration Card</option>
                                <option value="Voter Id">Voter Id</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="document1">Document 1 Upload (Can choose multiple)</label>
                            <input class="form-control" id="document1" multiple="multiple" name="document1" required
                                   type="file"/>
                        </div>

                        <div class="dz-preview dz-preview-multiple m-0 d-flex flex-column" id="documentPreviews"></div>

                        <div class="mb-3">
                            <label class="form-label" for="document2Type">Document 2 Type</label>
                            <select aria-label="Default select example" class="form-select" id="document2Type"
                                    name="document2Type"
                                    required>
                                <option selected="" value="">Open this select menu</option>
                                <option value="Pan Card">Pan Card</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="document2">Document 2 Upload (Can choose multiple)</label>
                            <input class="form-control" id="document2" multiple="multiple" name="document2" required
                                   type="file"/>
                        </div>
                        <input name="created_by" required type="hidden"
                               value="{{ request.session.id }}">
                        <input name="last_updated_by" required type="hidden"
                               value="{{ request.session.id }}">

                        <div class="col-12">
                            <button class="btn btn-primary" type="submit">Submit</button>
                        </div>
                    </form>

                </div>
            </div>
            {% include 'footer.html' %}

        </div>
    </div>
</main>
<!-- ===============================================-->
<!--    End of Main Content-->
<!-- ===============================================-->


<!-- ===============================================-->
<!--    JavaScripts-->
<!-- ===============================================-->
<script src="{% static 'vendors/popper/popper.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap/bootstrap.min.js' %}"></script>
<script src="{% static 'vendors/anchorjs/anchor.min.js' %}"></script>
<script src="{% static 'vendors/is/is.min.js' %}"></script>
<script src="{% static 'vendors/fontawesome/all.min.js' %}"></script>
<script src="{% static 'vendors/lodash/lodash.min.js' %}"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
<script src="{% static 'vendors/list.js/list.min.js' %}"></script>
<script src="{% static 'vendors/feather-icons/feather.min.js' %}"></script>
<script src="{% static 'vendors/dayjs/dayjs.min.js' %}"></script>
<script src="{% static 'vendors/choices/choices.min.js' %}"></script>
<script src="{% static 'js/phoenix.js' %}"></script>
<script src="{% static 'vendors/dropzone/dropzone.min.js' %}"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
        document.addEventListener('DOMContentLoaded', function () {
            const documentInput = document.getElementById('document1');
            const documentPreviews = document.getElementById('documentPreviews');

            documentInput.addEventListener('change', function () {
                const files = documentInput.files;

                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const previewContainer = createPreviewContainer(file);
                    documentPreviews.appendChild(previewContainer);
                }
            });

            // Function to create a preview container for a file
            function createPreviewContainer(file) {
                const previewContainer = document.createElement('div');
                previewContainer.classList.add('d-flex', 'mb-3', 'pb-3', 'border-bottom', 'media');

                const imageContainer = document.createElement('div');
                imageContainer.classList.add('border', 'border-300', 'p-2', 'rounded-2', 'me-2');

                const image = document.createElement('img');
                imageContainer.classList.add('border', 'border-300', 'p-2', 'rounded-2', 'me-2');
                if (file.type.startsWith('image/')) {
                    // If it's an image, display the image preview
                    const image = document.createElement('img');
                    image.classList.add('rounded-2', 'dz-image');
                    image.src = URL.createObjectURL(file);
                    image.onload = function () {
                        URL.revokeObjectURL(image.src);
                    };
                     image.style.maxWidth = '50px'; // Adjust the maximum width as needed
                image.style.maxHeight = '50px'; // Adjust the maximum height as needed

                    imageContainer.appendChild(image);
                } else {
                    // If it's not an image, display the file icon
                    const fileIcon = document.createElement('i');
                    fileIcon.classList.add('fas', 'fa-file'); // Add your file icon classes here
                    imageContainer.appendChild(fileIcon);
                }

                imageContainer.appendChild(image);
                previewContainer.appendChild(imageContainer);

                const infoContainer = document.createElement('div');
                infoContainer.classList.add('flex-1', 'd-flex', 'flex-between-center');

                const infoLeft = document.createElement('div');

                const fileName = document.createElement('h6');
                fileName.textContent = file.name;

                const fileInfo = document.createElement('div');
                fileInfo.classList.add('d-flex', 'align-items-center');

                const fileSize = document.createElement('p');
                fileSize.classList.add('mb-0', 'fs--1', 'text-400', 'lh-1');
                fileSize.textContent = formatFileSize(file.size);

                const progressContainer = document.createElement('div');
                progressContainer.classList.add('dz-progress');

                const uploadProgress = document.createElement('span');
                uploadProgress.classList.add('dz-upload');
                uploadProgress.dataset.dzUploadprogress = '';

                progressContainer.appendChild(uploadProgress);

                fileInfo.appendChild(fileSize);
                fileInfo.appendChild(progressContainer);

                const errorMessage = document.createElement('span');
                errorMessage.classList.add('fs--2', 'text-danger');
                errorMessage.dataset.dzErrormessage = '';

                infoLeft.appendChild(fileName);
                infoLeft.appendChild(fileInfo);
                infoLeft.appendChild(errorMessage);

                const dropdownContainer = document.createElement('div');
                dropdownContainer.classList.add('dropdown', 'font-sans-serif');

                const dropdownButton = document.createElement('button');
                dropdownButton.classList.add('btn', 'btn-link', 'text-600', 'btn-sm', 'dropdown-toggle', 'btn-reveal', 'dropdown-caret-none');
                dropdownButton.type = 'button';
                dropdownButton.dataset.bsToggle = 'dropdown';
                dropdownButton.setAttribute('aria-haspopup', 'true');
                dropdownButton.setAttribute('aria-expanded', 'false');

                const ellipsisIcon = document.createElement('span');
                ellipsisIcon.classList.add('fas', 'fa-ellipsis-h');

                dropdownButton.appendChild(ellipsisIcon);

                const dropdownMenu = document.createElement('div');
                dropdownMenu.classList.add('dropdown-menu', 'dropdown-menu-end', 'border', 'py-2');

                const removeFileItem = document.createElement('a');
                removeFileItem.classList.add('dropdown-item');
                removeFileItem.href = '#!';
                removeFileItem.dataset.dzRemove = 'data-dz-remove';
                removeFileItem.textContent = 'Remove File';

                dropdownMenu.appendChild(removeFileItem);

                dropdownContainer.appendChild(dropdownButton);
                dropdownContainer.appendChild(dropdownMenu);

                infoContainer.appendChild(infoLeft);
                infoContainer.appendChild(dropdownContainer);

                previewContainer.appendChild(infoContainer);

                // Add a click event to remove the file preview
                removeFileItem.addEventListener('click', function () {
                    previewContainer.remove();

                    const currentFiles = Array.from(documentInput.files);
                    const currentIndex = currentFiles.indexOf(file);

                    if (currentIndex !== -1) {
                        currentFiles.splice(currentIndex, 1);
                        // Create a new FileList with the updated files
                        const newFileList = new DataTransfer();
                        currentFiles.forEach((file) => {
                            newFileList.items.add(file);
                        });
                        // Update the input field's files property with the new FileList
                        documentInput.files = newFileList.files;
                    }
                });
                return previewContainer;
            }

            // Function to format file size for display
            function formatFileSize(size) {
                if (size < 1024) {
                    return size + ' B';
                } else if (size < 1024 * 1024) {
                    return (size / 1024).toFixed(2) + ' KB';
                } else {
                    return (size / (1024 * 1024)).toFixed(2) + ' MB';
                }
            }
        });
    </script>
</body>

</html>